jQuery("#fss").length&&function(){var l,a,d,n,h,i,t,o,r,f={width:1.2,height:1.2,depth:2,segments:8,slices:5,xRange:.3,yRange:.2,zRange:1,ambient:"#000000",diffuse:"#FFFFFF",speed:.002},m={count:4,xyScalar:1,zOffset:30,ambient:"#000000",diffuse:"#FFFFFF",speed:.0015,gravity:1200,dampening:.95,minLimit:10,maxLimit:null,minDistance:20,maxDistance:400,autopilot:!1,draw:!1,bounds:FSS.Vector3.create(),step:FSS.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1))},c="webgl",s="canvas",S="svg",g={renderer:s},e=Date.now(),u=FSS.Vector3.create(),F=FSS.Vector3.create(),p=document.getElementById("fss"),V=document.getElementById("fss");function b(){var e,t;for(d.remove(n),a.clear(),h=new FSS.Plane(f.width*a.width,f.height*a.height,f.segments,f.slices),i=new FSS.Material(f.ambient,f.diffuse),n=new FSS.Mesh(h,i),d.add(n),e=h.vertices.length-1;0<=e;e--)(t=h.vertices[e]).anchor=FSS.Vector3.clone(t.position),t.step=FSS.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),t.time=Math.randomInRange(0,Math.PIM2)}function v(){var e,t;for(e=d.lights.length-1;0<=e;e--)t=d.lights[e],d.remove(t);for(a.clear(),e=0;e<m.count;e++)(t=new FSS.Light(m.ambient,m.diffuse)).ambientHex=t.ambient.format(),t.diffuseHex=t.diffuse.format(),d.add(t),t.mass=Math.randomInRange(.5,1),t.velocity=FSS.Vector3.create(),t.acceleration=FSS.Vector3.create(),t.force=FSS.Vector3.create()}function x(e,t){a.setSize(e,t),FSS.Vector3.set(u,a.halfWidth,a.halfHeight),b()}function y(){l=Date.now()-e,function(){var e,t,n,i,a,o,r,c=f.depth/2;for(FSS.Vector3.copy(m.bounds,u),FSS.Vector3.multiplyScalar(m.bounds,m.xyScalar),FSS.Vector3.setZ(F,m.zOffset),m.autopilot&&(e=Math.sin(m.step[0]*l*m.speed),t=Math.cos(m.step[1]*l*m.speed),FSS.Vector3.set(F,m.bounds[0]*e,m.bounds[1]*t,m.zOffset)),i=d.lights.length-1;0<=i;i--){a=d.lights[i],FSS.Vector3.setZ(a.position,m.zOffset);var s=Math.clamp(FSS.Vector3.distanceSquared(a.position,F),m.minDistance,m.maxDistance),S=m.gravity*a.mass/s;FSS.Vector3.subtractVectors(a.force,F,a.position),FSS.Vector3.normalise(a.force),FSS.Vector3.multiplyScalar(a.force,S),FSS.Vector3.set(a.acceleration),FSS.Vector3.add(a.acceleration,a.force),FSS.Vector3.add(a.velocity,a.acceleration),FSS.Vector3.multiplyScalar(a.velocity,m.dampening),FSS.Vector3.limit(a.velocity,m.minLimit,m.maxLimit),FSS.Vector3.add(a.position,a.velocity)}for(o=h.vertices.length-1;0<=o;o--)r=h.vertices[o],e=Math.sin(r.time+r.step[0]*l*f.speed),t=Math.cos(r.time+r.step[1]*l*f.speed),n=Math.sin(r.time+r.step[2]*l*f.speed),FSS.Vector3.set(r.position,f.xRange*h.segmentWidth*e,f.yRange*h.sliceHeight*t,f.zRange*c*n-c),FSS.Vector3.add(r.position,r.anchor);h.dirty=!0}(),M(),requestAnimationFrame(y)}function M(){var e,t,n,i;if(a.render(d),m.draw)for(e=d.lights.length-1;0<=e;e--)switch(t=(i=d.lights[e]).position[0],n=i.position[1],g.renderer){case s:a.context.lineWidth=.5,a.context.beginPath(),a.context.arc(t,n,10,0,Math.PIM2),a.context.strokeStyle=i.ambientHex,a.context.stroke(),a.context.beginPath(),a.context.arc(t,n,4,0,Math.PIM2),a.context.fillStyle=i.diffuseHex,a.context.fill();break;case S:t+=a.halfWidth,n=a.halfHeight-n,i.core.setAttributeNS(null,"fill",i.diffuseHex),i.core.setAttributeNS(null,"cx",t),i.core.setAttributeNS(null,"cy",n),a.element.appendChild(i.core),i.ring.setAttributeNS(null,"stroke",i.ambientHex),i.ring.setAttributeNS(null,"cx",t),i.ring.setAttributeNS(null,"cy",n),a.element.appendChild(i.ring)}}function w(e){FSS.Vector3.set(F,e.x,a.height-e.y),FSS.Vector3.subtract(F,u),m.autopilot=!m.autopilot}function R(e){FSS.Vector3.set(F,e.x,a.height-e.y),FSS.Vector3.subtract(F,u)}function I(e){x(p.offsetWidth,p.offsetHeight),M()}t=new FSS.WebGLRenderer,o=new FSS.CanvasRenderer,r=new FSS.SVGRenderer,function(e){switch(a&&V.removeChild(a.element),e){case c:a=t;break;case s:a=o;break;case S:a=r}a.setSize(p.offsetWidth,p.offsetHeight),V.appendChild(a.element)}(g.renderer),d=new FSS.Scene,b(),v(),window.addEventListener("resize",I),p.addEventListener("click",w),p.addEventListener("mousemove",R),x(p.offsetWidth,p.offsetHeight),y()}();